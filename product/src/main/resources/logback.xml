<configuration>
  <!--为了防止进程退出时，内存中的数据丢失，请加上此选项-->
  <shutdownHook class="ch.qos.logback.core.hook.DelayingShutdownHook"/>
  <springProperty scope="context" name="appName" source="spring.application.name"
    defaultValue="unknowAppName"/>


  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <!-- 日志格式 -->
    <encoder>
      <charset>UTF-8</charset>
      <pattern>%d %-5level [%property{appName}] %X{traceId} [%thread] %logger{0}: %msg%n</pattern>
    </encoder>
  </appender>


  <appender name="file_out" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>log/product.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
      <fileNamePattern>log/product.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
      <maxFileSize>100MB</maxFileSize>
      <maxHistory>30</maxHistory>
      <totalSizeCap>50GB</totalSizeCap>
    </rollingPolicy>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} %-5level %X{traceId} [%thread] %logger{36} - %msg%n%ex</pattern>
    </encoder>
  </appender>

  <root level="info">
    <appender-ref ref="STDOUT"/>
  </root>

</configuration>